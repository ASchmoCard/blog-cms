(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bc064d8"],{9762:function(t,e,n){},aaef:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.hintShow?n("el-alert",{attrs:{title:"图床配置及用法请查看：https://github.com/Naccl/PictureHosting",type:"warning","show-icon":""}}):t._e(),n("el-row",[n("el-col",{attrs:{span:8}},[n("el-input",{staticStyle:{"min-width":"500px"},attrs:{placeholder:"请输入token进行初始化",clearable:!0},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchUser(e)}},model:{value:t.token,callback:function(e){t.token=e},expression:"token"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchUser},slot:"append"},[t._v("查询")])],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:8}},[n("span",{staticClass:"middle"},[t._v("当前用户：")]),n("el-avatar",{attrs:{size:50,src:t.userInfo.avatar_url}},[t._v("User")]),n("span",{staticClass:"middle"},[t._v(t._s(t.userInfo.login))])],1)],1),n("el-row",[n("el-col",{attrs:{span:8}},[n("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-check",disabled:t.isSave},on:{click:function(e){return t.saveUser(!0)}}},[t._v("保存配置")]),n("el-button",{attrs:{type:"info",size:"medium",icon:"el-icon-close"},on:{click:function(e){return t.saveUser(!1)}}},[t._v("清除配置")])],1)],1)],1)},r=[],a=(n("e9c4"),n("c9f7")),c={name:"Setting",data:function(){return{token:"",userInfo:{login:"未配置"},isSave:!0,hintShow:!1}},created:function(){this.token=localStorage.getItem("githubToken");var t=localStorage.getItem("githubUserInfo");this.token&&t?(this.userInfo=JSON.parse(t),this.isSave=!1):this.userInfo={login:"未配置"};var e=window.localStorage.getItem("user")||"{}",n=JSON.parse(e);"{}"!==e&&"ROLE_admin"!==n.role&&(this.hintShow=!0)},methods:{searchUser:function(){var t=this;Object(a["c"])(this.token).then((function(e){t.userInfo=e,t.isSave=!1}))},saveUser:function(t){t?(localStorage.setItem("githubToken",this.token),localStorage.setItem("githubUserInfo",JSON.stringify(this.userInfo)),this.msgSuccess("保存成功")):(localStorage.removeItem("githubToken"),localStorage.removeItem("githubUserInfo"),this.msgSuccess("清除成功"))}}},s=c,i=(n("f024"),n("2877")),u=Object(i["a"])(s,o,r,!1,null,null,null);e["default"]=u.exports},c9f7:function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return d})),n.d(e,"e",(function(){return h}));n("ac1f"),n("00b4"),n("d3b7"),n("99af");var o=n("bc3a"),r=n.n(o),a=n("323e"),c=n.n(a),s=(n("a5d8"),n("5c96")),i=r.a.create({baseURL:"https://api.github.com",timeout:3e4});function u(t){return i({url:"/user",method:"GET",headers:{Authorization:"token ".concat(t)}})}function l(t){return i({url:"/users/".concat(t,"/repos"),method:"GET"})}function f(t,e,n){return i({url:"/repos/".concat(t,"/").concat(e,"/contents").concat(n),method:"GET"})}function d(t,e,n,o){return i({url:"/repos/".concat(t,"/").concat(e,"/contents/").concat(n),method:"DELETE",data:o})}function h(t,e,n,o,r){return i({url:"/repos/".concat(t,"/").concat(e,"/contents").concat(n,"/").concat(o),method:"PUT",data:r})}i.interceptors.request.use((function(t){c.a.start(),/get/i.test(t.method)&&(t.params=t.params||{},t.params.t=(new Date).getTime());var e=localStorage.getItem("githubToken");return e&&(t.headers.Authorization="token ".concat(e)),t}),(function(t){return console.info(t),Promise.reject(t)})),i.interceptors.response.use((function(t){return c.a.done(),t.data}),(function(t){return console.info(t),s["Message"].error(t.message),Promise.reject(t)}))},e9c4:function(t,e,n){var o=n("23e7"),r=n("d066"),a=n("d039"),c=r("JSON","stringify"),s=/[\uD800-\uDFFF]/g,i=/^[\uD800-\uDBFF]$/,u=/^[\uDC00-\uDFFF]$/,l=function(t,e,n){var o=n.charAt(e-1),r=n.charAt(e+1);return i.test(t)&&!u.test(r)||u.test(t)&&!i.test(o)?"\\u"+t.charCodeAt(0).toString(16):t},f=a((function(){return'"\\udf06\\ud834"'!==c("\udf06\ud834")||'"\\udead"'!==c("\udead")}));c&&o({target:"JSON",stat:!0,forced:f},{stringify:function(t,e,n){var o=c.apply(null,arguments);return"string"==typeof o?o.replace(s,l):o}})},f024:function(t,e,n){"use strict";n("9762")}}]);